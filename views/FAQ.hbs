<!DOCTYPE html>
<html>
<head>
	<title>FAQ</title>
	<link rel="stylesheet" type = "text/css" href="../css/FAQ.css">
	<script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(document).ready(function () {

			var user;
			$.get('/checkuser', function(result){
				user = result;
				if(user != "user_0")
					$('.container3').hide();
			})

		    $('#submit').click(function()
		    {
		    	var questiontitle = $('#questiontitle').val();
		    	var questiontext = $('#questiontext').val();

		    	if(questiontitle == "" || questiontext == "")
		    	{
		    		alert("Question title and/or question text must not be empty.");
		    	}
		    	else{
			    	var value = $(this).siblings('#question_id').val();

			    	$.get('/submitFAQ', {questiontitle:questiontitle, questiontext:questiontext}, function(result)
			    	{
			    		$('#postlist').prepend(result);

			    		if(user != "user_0")
			    			$('#postlist').children('.posts').children('.container3').remove();
			    	})

			    	$('#questiontitle').val('');
			    	$('#questiontext').val('');
		    	}
		    });

		    $('.commentB').click(function()
		    {
		    	var question_id = $(this).siblings('#question_id').val();
		    	var comment_text = $('#' + question_id + '_comment_text').val();

		    	var value = this.value;

		    	if(comment_text == "")
		    	{
		    		alert("Comment text must not be empty.");
		    	}
		    	else
		    	{
			    	$.get('/submitcomment', {comment_text:comment_text, question_id:question_id}, function(result)
			    	{
			    		if(value == "Submit Comment")
			    		{
			    			$('#' + question_id + '_commentlist').prepend(result);
			    		}
			    		else
			    		{
			    			$('#' + question_id + '_comtext').text(comment_text);
			    		}
			    	});
			    	$('#' + question_id + '_comment_text').val("");
		    		$(this).val("Edit Comment");
		    	}
		    });
		});
	</script>
</head>
<body style = "background-image: url(images/pattern.png);">
	{{> navbar}}

	<div style = "padding-left: 20px; padding-right: 20px;">
		<div class = container2>
			<p id= FAQHEADER> Frequently Asked Questions </p>
			<div class = container1>
				<div id = profile>
						<a href = "/userpage"><div style = "background-image: url(uploads/{{path}}); height: 200px; width: 200px; margin: auto; background-size: cover; border-radius: 50%;"></div></a>
						 <br>
						<p id = profilename> <a href = "userpage.html">{{name}}</a> </p>
				</div>

				<div class = container2 id=postlist> 
					{{#each (reverseArray q)}}
						{{> post this}}
					{{/each}}
				</div>
				<div class = container2>
					<div id = addQuestion>
						<p id = addQHeader> Add a Question: </p>
						<form id= addQTitle>
							<label id = qTitleLabel for="Question title"> Title of question: </label> <br>
							<input id = questiontitle type="text" id="addQTitle" name="questiontitle" required><br>
							<label id = qLabel for="Question"> Question: </label><br> 
							<textarea id = questiontext rows = "1" cols = "20" name = "questiontext" required></textarea><br>
							<input type="button" name="submit" id="submit" value="submit">
						</form>
					</div>
				</div>
		</div>
	</div>
</body>
</html>